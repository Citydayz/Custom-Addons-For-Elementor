# Cursor Rules â€” 05 Accessibility (Authoritative)
> **Project:** Custom Addons for Elementor by Hugo Scheer  
> **Scope:** Accessibility (A11y) standards for all front-end widgets and templates.  
> **Hierarchy:** Overrules all visual/performance preferences if accessibility is impacted.  
> **Alignment:** WCAG 2.1 AA minimum compliance.

---

## ğŸ¯ Purpose
Ensure **all widgets** and **front-end components** of the plugin are **accessible by default**, meeting **WCAG 2.1 AA** standards.  
Accessibility is a **non-negotiable** quality requirement â€” failure to comply requires routing to **Agent 4 (A11y)** for correction.

---

## ğŸ§± Core Principles
- **Perceivable:** Information must be visible/audible to all users.
- **Operable:** All functionality must be available via keyboard.
- **Understandable:** Content and navigation must be predictable.
- **Robust:** Code must be interpretable by assistive technologies.

---

## â™¿ Required WCAG 2.1 Criteria (Minimum)
| Principle | Criterion | Description |
|------------|------------|-------------|
| Perceivable | 1.1.1 | All images have `alt` text or empty alt for decorative images |
| Perceivable | 1.3.1 | Proper use of headings (`h1`â€“`h6`), lists, tables, and landmarks |
| Perceivable | 1.4.3 | Minimum contrast ratio 4.5:1 for text (3:1 for large text) |
| Operable | 2.1.1 | Keyboard access for all interactive controls |
| Operable | 2.4.3 | Logical focus order; visible focus indicators |
| Understandable | 3.2.3 | Consistent navigation/order of controls |
| Robust | 4.1.2 | ARIA labels and roles used appropriately |

Cursor must evaluate each widget output against these before validation.

---

## ğŸ§© HTML Semantics
- Use **semantic elements** for structure: `<header>`, `<nav>`, `<main>`, `<footer>`, `<section>`, `<article>`, `<aside>`.  
- Avoid `<div>` and `<span>` misuse when meaningful tags exist.  
- Use headings hierarchically (`h1`â†’`h2`â†’`h3`) without skipping levels.  
- Wrap widget output in a **single root container** with the CSS class matching the widget slug (ex. `.cae-footer`).

### Example
```html
<footer class="cae-footer" role="contentinfo">
  <nav aria-label="Footer Menu">
    <ul class="cae-footer__menu">
      <li><a href="#">About</a></li>
      <li><a href="#">Contact</a></li>
    </ul>
  </nav>
</footer>
```

---

## ğŸ”¤ Text & Contrast
- Maintain **minimum contrast ratios** per WCAG 2.1 AA.  
- Text contrast = 4.5:1 for normal, 3:1 for large (â‰¥18pt or bold â‰¥14pt).  
- Never rely on color alone to convey information.  
- Avoid absolute font sizes; use `rem`, `%`, or `em`.  
- Ensure text resizing up to 200% doesnâ€™t break layout.

### Cursor Validation
When generating CSS, Cursor must check:
- Background vs text color contrast.
- No color-only state indicators (use icons, shapes, or text).

---

## âŒ¨ï¸ Keyboard Navigation
- All widgets must be **fully operable via keyboard**:
  - `Tab` for focus traversal.
  - `Enter`/`Space` for activation.
  - `Esc` for closing dialogs/menus.
- Focus order must be **logical** and follow DOM reading order.  
- Provide **visible focus** indicators for all focusable elements.  
- Never disable outline globally (`outline: none;` is forbidden).

### Example (CSS)
```css
.cae-footer a:focus {
  outline: 2px solid #005fcc;
  outline-offset: 2px;
}
```

---

## ğŸ§  ARIA & Roles
- Use ARIA **only** when semantic HTML is insufficient.  
- Always pair ARIA with proper native behavior.  
- Avoid redundant or conflicting roles.

| Context | Recommended | Avoid |
|----------|--------------|--------|
| Main content | `role="main"` | redundant with `<main>` |
| Navigation | `role="navigation"` + `aria-label="Main menu"` |  multiple unnamed navs |
| Buttons | `<button>` | `<div role="button">` |
| Headings | native `<h*>` | `role="heading"` manually |

### Example
```html
<button class="cae-hero__cta" aria-label="Learn more about us">
  Learn More
</button>
```

---

## ğŸ“± Responsive & Mobile A11y
- Use **mobile-first** CSS with readable text and touch targets â‰¥48px height.  
- Ensure **tap targets** are not too close (â‰¥8px spacing).  
- Avoid horizontal scrolling on narrow screens.  
- Use relative units (`em`, `rem`, `%`) for spacing and font size.  
- Ensure orientation changes donâ€™t hide or disable content.

---

## ğŸ”Š Screen Readers & Hidden Content
- Hidden content: use `aria-hidden="true"` **only** when intentionally excluded.  
- For visually hidden text (accessible to screen readers):  
```css
.visually-hidden {
  position: absolute;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden;
  clip: rect(0 0 0 0);
  border: 0;
}
```

- When dynamically injecting content (via JS), use `aria-live` regions for announcements.

```html
<div aria-live="polite" class="cae-hero__feedback"></div>
```

---

## ğŸ¨ Animation & Motion
- Avoid auto-play animations or flashing elements.  
- Any animation longer than 5s must be **pausable**.  
- Do not use flashing content that exceeds **3 flashes per second**.  
- Respect user system preferences (`prefers-reduced-motion`).

### Example (CSS)
```css
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.001s !important;
    transition-duration: 0.001s !important;
  }
}
```

---

## ğŸ§ª Testing Checklist
Cursor (or developer) must validate widgets using the following:

| Category | Check | Required |
|-----------|--------|----------|
| Semantic HTML | Proper elements used | âœ… |
| Keyboard | Full navigation possible | âœ… |
| Focus | Visible and logical | âœ… |
| Contrast | Meets 4.5:1 min | âœ… |
| ARIA | No misuse/conflicts | âœ… |
| Mobile | Touch-friendly spacing | âœ… |
| Animation | Respects reduced-motion | âœ… |
| Screen Reader | Announces all content | âœ… |

Failure â†’ route to **Agent 4 (A11y)** for remediation.

---

## ğŸš« Forbidden Patterns
- `outline: none;` or disabling focus styles.
- Color-only cues (`red` = error without text/icon).
- Non-semantic clickable divs/spans.
- Inaccessible dropdowns without keyboard support.
- Motion/auto-scroll without opt-out.
- Missing or duplicate ARIA labels.

---

## ğŸ§­ Agent Routing
- Accessibility implementation/review â†’ **Agent 4**
- CSS or structure fixes â†’ **Agent 1** then review by **Agent 4**
- JS behavior (focus, keyboard) â†’ **Agent 1** with validation by **Agent 4**
- Final validation â†’ **Agent 0**

---

**End of 05 Accessibility â€” Authoritative.**
